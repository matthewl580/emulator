{
  "initCode": "// Advanced Sample Game Init\nwindow._state = {\n  player: { x: 32, y: 32, score: 0 },\n  coins: Array(5).fill().map(() => ({\n    x: Math.floor(Math.random() * 64),\n    y: Math.floor(Math.random() * 64)\n  })),\n  enemies: Array(3).fill().map(() => ({\n    x: Math.floor(Math.random() * 64),\n    y: Math.floor(Math.random() * 64),\n    dx: Math.random() > 0.5 ? 1 : -1,\n    dy: Math.random() > 0.5 ? 1 : -1\n  })),\n  gameOver: false\n};\n\n// Setup audio\ntry {\n  window._synth = new Tone.PolySynth().toDestination();\n  window._bassLine = new Tone.Synth({\n    oscillator: { type: 'triangle' },\n    envelope: { attack: 0.1, decay: 0.2, sustain: 0.5, release: 0.8 }\n  }).toDestination();\n  \n  // Background music pattern\n  const melody = ['C4','E4','G4','C5','G4','E4'];\n  const bassline = ['C3', 'G2', 'A2', 'F2'];\n  \n  let mi = 0, bi = 0;\n  \n  // Melody loop\n  window._melodyLoop = new Tone.Loop((time) => {\n    window._synth.triggerAttackRelease(melody[mi % melody.length], '8n', time);\n    mi++;\n  }, '4n');\n  \n  // Bass loop\n  window._bassLoop = new Tone.Loop((time) => {\n    window._bassLine.triggerAttackRelease(bassline[bi % bassline.length], '2n', time);\n    bi++;\n  }, '2n');\n  \n  // Setup effects\n  window._effects = {\n    coinSound: () => window._synth.triggerAttackRelease(['C6', 'E6'], '16n'),\n    hitSound: () => window._synth.triggerAttackRelease(['C3', 'G2'], '8n'),\n    gameOverSound: () => {\n      window._synth.triggerAttackRelease(['C4', 'G3', 'E3', 'C3'], '2n');\n      window._melodyLoop.stop();\n      window._bassLoop.stop();\n    }\n  };\n  \n  Tone.Transport.bpm.value = 120;\n  window._melodyLoop.start(0);\n  window._bassLoop.start(0);\n  \n} catch (e) { console.warn('Tone unavailable', e); }",
  "updateCode": "// Advanced Sample Game Update\n(function(){\n  const canvas = document.getElementById('game-canvas');\n  const ctx = window._ctx || canvas.getContext('2d');\n  const state = window._state;\n  if (!state || state.gameOver) return;\n\n  // Handle input\n  document.onkeydown = (e) => {\n    if (state.gameOver) return;\n    switch(e.key) {\n      case 'ArrowLeft': state.player.x = Math.max(0, state.player.x - 1); break;\n      case 'ArrowRight': state.player.x = Math.min(63, state.player.x + 1); break;\n      case 'ArrowUp': state.player.y = Math.max(0, state.player.y - 1); break;\n      case 'ArrowDown': state.player.y = Math.min(63, state.player.y + 1); break;\n    }\n  };\n\n  // Clear screen\n  ctx.fillStyle = '#000022';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  // Scale from 64 logical -> canvas width\n  const scale = canvas.width / 64;\n\n  // Draw stars (background)\n  for (let i = 0; i < 20; i++) {\n    ctx.fillStyle = '#ffffff';\n    ctx.fillRect(\n      ((Math.sin(Date.now()/1000 + i) * 32 + 32) * scale),\n      ((Math.cos(Date.now()/1000 + i) * 32 + 32) * scale),\n      scale/2,\n      scale/2\n    );\n  }\n\n  // Update and draw coins\n  state.coins.forEach((coin, i) => {\n    // Collect coins\n    if (Math.abs(coin.x - state.player.x) < 2 && Math.abs(coin.y - state.player.y) < 2) {\n      state.player.score += 10;\n      coin.x = Math.floor(Math.random() * 64);\n      coin.y = Math.floor(Math.random() * 64);\n      if (window._effects) window._effects.coinSound();\n    }\n\n    // Draw coin\n    ctx.fillStyle = '#ffff00';\n    ctx.fillRect(coin.x * scale, coin.y * scale, scale, scale);\n  });\n\n  // Update and draw enemies\n  state.enemies.forEach(enemy => {\n    // Move enemies\n    enemy.x += enemy.dx;\n    enemy.y += enemy.dy;\n    \n    // Bounce off walls\n    if (enemy.x <= 0 || enemy.x >= 63) enemy.dx *= -1;\n    if (enemy.y <= 0 || enemy.y >= 63) enemy.dy *= -1;\n\n    // Check collision with player\n    if (Math.abs(enemy.x - state.player.x) < 2 && Math.abs(enemy.y - state.player.y) < 2) {\n      state.gameOver = true;\n      if (window._effects) window._effects.gameOverSound();\n    }\n\n    // Draw enemy\n    ctx.fillStyle = '#ff0000';\n    ctx.fillRect(enemy.x * scale, enemy.y * scale, scale, scale);\n  });\n\n  // Draw player\n  ctx.fillStyle = '#00ff00';\n  ctx.fillRect(state.player.x * scale, state.player.y * scale, scale, scale);\n\n  // Draw score\n  ctx.fillStyle = '#ffffff';\n  ctx.font = (12 * (canvas.width/512)) + 'px monospace';\n  ctx.fillText(`Score: ${state.player.score}`, 8, 18);\n\n  // Game over text\n  if (state.gameOver) {\n    ctx.fillStyle = '#ffffff';\n    ctx.font = (24 * (canvas.width/512)) + 'px monospace';\n    ctx.fillText('Game Over!', canvas.width/4, canvas.height/2);\n  }\n})();",
  "displayMode": "1",
  "timestamp": "2025-11-03T00:00:00.000Z"
}