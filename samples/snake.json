{
  "initCode": "// Snake Game Init\nwindow._state = {\n  snake: [{ x: 32, y: 32 }],\n  direction: { x: 1, y: 0 },\n  food: { x: 48, y: 32 },\n  score: 0,\n  gameOver: false,\n  lastUpdate: Date.now()\n};\n\n// Setup audio\ntry {\n  window._synth = new Tone.Synth().toDestination();\n  window._effects = {\n    eat: () => window._synth.triggerAttackRelease('C5', '32n'),\n    die: () => window._synth.triggerAttackRelease(['C3', 'G2'], '4n')\n  };\n} catch (e) { console.warn('Tone unavailable', e); }",
  "updateCode": "// Snake Game Update\n(function(){\n  const canvas = document.getElementById('game-canvas');\n  const ctx = window._ctx || canvas.getContext('2d');\n  const state = window._state;\n  if (!state || state.gameOver) return;\n\n  // Input handling\n  document.onkeydown = (e) => {\n    if (state.gameOver) return;\n    switch(e.key) {\n      case 'ArrowLeft':\n        if (state.direction.x === 0) state.direction = { x: -1, y: 0 };\n        break;\n      case 'ArrowRight':\n        if (state.direction.x === 0) state.direction = { x: 1, y: 0 };\n        break;\n      case 'ArrowUp':\n        if (state.direction.y === 0) state.direction = { x: 0, y: -1 };\n        break;\n      case 'ArrowDown':\n        if (state.direction.y === 0) state.direction = { x: 0, y: 1 };\n        break;\n    }\n  };\n\n  // Update game state every 100ms\n  if (Date.now() - state.lastUpdate < 100) return;\n  state.lastUpdate = Date.now();\n\n  // Move snake\n  const head = { ...state.snake[0] };\n  head.x += state.direction.x;\n  head.y += state.direction.y;\n\n  // Wrap around edges\n  if (head.x < 0) head.x = 63;\n  if (head.x > 63) head.x = 0;\n  if (head.y < 0) head.y = 63;\n  if (head.y > 63) head.y = 0;\n\n  // Check collision with self\n  if (state.snake.some(segment => segment.x === head.x && segment.y === head.y)) {\n    state.gameOver = true;\n    if (window._effects) window._effects.die();\n    return;\n  }\n\n  // Add new head\n  state.snake.unshift(head);\n\n  // Check if food eaten\n  if (head.x === state.food.x && head.y === state.food.y) {\n    state.score += 10;\n    if (window._effects) window._effects.eat();\n    // Generate new food\n    do {\n      state.food = {\n        x: Math.floor(Math.random() * 64),\n        y: Math.floor(Math.random() * 64)\n      };\n    } while (state.snake.some(segment => \n      segment.x === state.food.x && segment.y === state.food.y\n    ));\n  } else {\n    // Remove tail if no food eaten\n    state.snake.pop();\n  }\n\n  // Clear screen\n  ctx.fillStyle = '#001100';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  const scale = canvas.width / 64;\n\n  // Draw snake\n  ctx.fillStyle = '#00ff00';\n  state.snake.forEach((segment, i) => {\n    ctx.fillRect(segment.x * scale, segment.y * scale, scale - 1, scale - 1);\n  });\n\n  // Draw food\n  ctx.fillStyle = '#ff0000';\n  ctx.fillRect(state.food.x * scale, state.food.y * scale, scale - 1, scale - 1);\n\n  // Draw score\n  ctx.fillStyle = '#ffffff';\n  ctx.font = '12px monospace';\n  ctx.fillText(`Score: ${state.score}`, 10, 20);\n\n  // Game over\n  if (state.gameOver) {\n    ctx.fillStyle = '#ffffff';\n    ctx.font = '24px monospace';\n    ctx.fillText('Game Over!', canvas.width/4, canvas.height/2);\n  }\n})();",
  "displayMode": "1",
  "timestamp": "2025-11-04T00:00:00.000Z"
}