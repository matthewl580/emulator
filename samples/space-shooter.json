{
  "initCode": "// Space Shooter Init\nwindow._state = {\n  player: { x: 32, y: 56, health: 100 },\n  bullets: [],\n  enemies: [],\n  score: 0,\n  gameOver: false,\n  spawnTimer: 0\n};\n\n// Sound setup\ntry {\n  window._synth = new Tone.Synth().toDestination();\n  window._effects = {\n    shoot: () => window._synth.triggerAttackRelease('G4', '32n'),\n    explosion: () => window._synth.triggerAttackRelease('C2', '16n'),\n    hit: () => window._synth.triggerAttackRelease('E3', '16n')\n  };\n} catch (e) { console.warn('Tone unavailable', e); }",
  "updateCode": "// Space Shooter Update\n(function(){\n  const canvas = document.getElementById('game-canvas');\n  const ctx = window._ctx || canvas.getContext('2d');\n  const state = window._state;\n  if (!state || state.gameOver) return;\n\n  // Input handling\n  document.onkeydown = (e) => {\n    if (state.gameOver) return;\n    switch(e.key) {\n      case 'ArrowLeft': state.player.x = Math.max(0, state.player.x - 2); break;\n      case 'ArrowRight': state.player.x = Math.min(63, state.player.x + 2); break;\n      case ' ': \n        state.bullets.push({ x: state.player.x, y: state.player.y - 2 });\n        if (window._effects) window._effects.shoot();\n        break;\n    }\n  };\n\n  // Spawn enemies\n  state.spawnTimer++;\n  if (state.spawnTimer > 60) {\n    state.spawnTimer = 0;\n    state.enemies.push({\n      x: Math.random() * 64,\n      y: 0,\n      dx: Math.random() * 2 - 1\n    });\n  }\n\n  // Update bullets\n  state.bullets = state.bullets.filter(bullet => {\n    bullet.y -= 1;\n    return bullet.y > 0;\n  });\n\n  // Update enemies\n  state.enemies = state.enemies.filter(enemy => {\n    enemy.y += 0.5;\n    enemy.x += enemy.dx;\n    if (enemy.x < 0 || enemy.x > 63) enemy.dx *= -1;\n\n    // Check bullet collisions\n    state.bullets.forEach(bullet => {\n      if (Math.abs(bullet.x - enemy.x) < 2 && Math.abs(bullet.y - enemy.y) < 2) {\n        state.score += 10;\n        enemy.destroyed = true;\n        if (window._effects) window._effects.explosion();\n      }\n    });\n\n    // Check player collision\n    if (Math.abs(enemy.x - state.player.x) < 2 && Math.abs(enemy.y - state.player.y) < 2) {\n      state.health -= 20;\n      enemy.destroyed = true;\n      if (window._effects) window._effects.hit();\n    }\n\n    return !enemy.destroyed && enemy.y < 64;\n  });\n\n  // Clear screen\n  ctx.fillStyle = '#000033';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  const scale = canvas.width / 64;\n\n  // Draw stars\n  for (let i = 0; i < 50; i++) {\n    ctx.fillStyle = '#ffffff';\n    ctx.fillRect(\n      Math.sin(Date.now()/1000 + i) * canvas.width,\n      (i * scale + Date.now()/50) % canvas.height,\n      1,\n      1\n    );\n  }\n\n  // Draw bullets\n  ctx.fillStyle = '#00ffff';\n  state.bullets.forEach(bullet => {\n    ctx.fillRect(bullet.x * scale, bullet.y * scale, scale/2, scale);\n  });\n\n  // Draw enemies\n  ctx.fillStyle = '#ff0000';\n  state.enemies.forEach(enemy => {\n    ctx.fillRect(enemy.x * scale, enemy.y * scale, scale, scale);\n  });\n\n  // Draw player\n  ctx.fillStyle = '#00ff00';\n  ctx.fillRect(state.player.x * scale, state.player.y * scale, scale, scale);\n\n  // Draw HUD\n  ctx.fillStyle = '#ffffff';\n  ctx.font = '12px monospace';\n  ctx.fillText(`Score: ${state.score}  Health: ${state.health}`, 10, 20);\n\n  // Check game over\n  if (state.health <= 0) {\n    state.gameOver = true;\n    ctx.fillStyle = '#ffffff';\n    ctx.font = '24px monospace';\n    ctx.fillText('Game Over!', canvas.width/4, canvas.height/2);\n  }\n})();",
  "displayMode": "1",
  "timestamp": "2025-11-04T00:00:00.000Z"
}